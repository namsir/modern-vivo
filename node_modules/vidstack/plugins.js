import ht from"node:fs";import gt from"node:path";import{fileURLToPath as At}from"node:url";import Ae,{sep as He,resolve as Rt}from"path";import Re from"util";import{createUnplugin as dt}from"unplugin";function Te(e,r){return r={exports:{}},e(r,r.exports),r.exports}var w=Te(function(e,r){r.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1,r.find=(t,n)=>t.nodes.find(a=>a.type===n),r.exceedsLimit=(t,n,a=1,i)=>i===!1||!r.isInteger(t)||!r.isInteger(n)?!1:(Number(n)-Number(t))/Number(a)>=i,r.escapeNode=(t,n=0,a)=>{let i=t.nodes[n];i&&(a&&i.type===a||i.type==="open"||i.type==="close")&&i.escaped!==!0&&(i.value="\\"+i.value,i.escaped=!0)},r.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0),r.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1,r.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0,r.reduce=t=>t.reduce((n,a)=>(a.type==="text"&&n.push(a.value),a.type==="range"&&(a.type="text"),n),[]),r.flatten=(...t)=>{const n=[],a=i=>{for(let s=0;s<i.length;s++){let l=i[s];Array.isArray(l)?a(l):l!==void 0&&n.push(l)}return n};return a(t),n}});w.isInteger,w.find,w.exceedsLimit,w.escapeNode,w.encloseBrace,w.isInvalidBrace,w.isOpenOrClose,w.reduce,w.flatten;var te=(e,r={})=>{let t=(n,a={})=>{let i=r.escapeInvalid&&w.isInvalidBrace(a),s=n.invalid===!0&&r.escapeInvalid===!0,l="";if(n.value)return(i||s)&&w.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let A of n.nodes)l+=t(A);return l};return t(e)};var $e=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1};const z=(e,r,t)=>{if($e(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(r===void 0||e===r)return String(e);if($e(r)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n=Object.assign({relaxZeros:!0},t);typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let a=String(n.relaxZeros),i=String(n.shorthand),s=String(n.capture),l=String(n.wrap),A=e+":"+r+"="+a+i+s+l;if(z.cache.hasOwnProperty(A))return z.cache[A].result;let h=Math.min(e,r),g=Math.max(e,r);if(Math.abs(h-g)===1){let p=e+"|"+r;return n.capture?`(${p})`:n.wrap===!1?p:`(?:${p})`}let y=Me(e)||Me(r),c={min:e,max:r,a:h,b:g},S=[],_=[];if(y&&(c.isPadded=y,c.maxLen=String(c.max).length),h<0){let p=g<0?Math.abs(g):1;_=Oe(p,Math.abs(h),c,n),h=c.a=0}return g>=0&&(S=Oe(h,g,c,n)),c.negatives=_,c.positives=S,c.result=yt(_,S),n.capture===!0?c.result=`(${c.result})`:n.wrap!==!1&&S.length+_.length>1&&(c.result=`(?:${c.result})`),z.cache[A]=c,c.result};function yt(e,r,t){let n=de(e,r,"-",!1)||[],a=de(r,e,"",!1)||[],i=de(e,r,"-?",!0)||[];return n.concat(i).concat(a).join("|")}function _t(e,r){let t=1,n=1,a=we(e,t),i=new Set([r]);for(;e<=a&&a<=r;)i.add(a),t+=1,a=we(e,t);for(a=Ne(r+1,n)-1;e<a&&a<=r;)i.add(a),n+=1,a=Ne(r+1,n)-1;return i=[...i],i.sort(St),i}function Et(e,r,t){if(e===r)return{pattern:e,count:[],digits:0};let n=mt(e,r),a=n.length,i="",s=0;for(let l=0;l<a;l++){let[A,h]=n[l];A===h?i+=A:A!=="0"||h!=="9"?i+=Ct(A,h):s++}return s&&(i+=t.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[s],digits:a}}function Oe(e,r,t,n){let a=_t(e,r),i=[],s=e,l;for(let A=0;A<a.length;A++){let h=a[A],g=Et(String(s),String(h),n),y="";if(!t.isPadded&&l&&l.pattern===g.pattern){l.count.length>1&&l.count.pop(),l.count.push(g.count[0]),l.string=l.pattern+Ie(l.count),s=h+1;continue}t.isPadded&&(y=vt(h,t,n)),g.string=y+g.pattern+Ie(g.count),i.push(g),s=h+1,l=g}return i}function de(e,r,t,n,a){let i=[];for(let s of e){let{string:l}=s;!n&&!Le(r,"string",l)&&i.push(t+l),n&&Le(r,"string",l)&&i.push(t+l)}return i}function mt(e,r){let t=[];for(let n=0;n<e.length;n++)t.push([e[n],r[n]]);return t}function St(e,r){return e>r?1:r>e?-1:0}function Le(e,r,t){return e.some(n=>n[r]===t)}function we(e,r){return Number(String(e).slice(0,-r)+"9".repeat(r))}function Ne(e,r){return e-e%Math.pow(10,r)}function Ie(e){let[r=0,t=""]=e;return t||r>1?`{${r+(t?","+t:"")}}`:""}function Ct(e,r,t){return`[${e}${r-e===1?"":"-"}${r}]`}function Me(e){return/^-?(0+)\d/.test(e)}function vt(e,r,t){if(!r.isPadded)return e;let n=Math.abs(r.maxLen-String(e).length),a=t.relaxZeros!==!1;switch(n){case 0:return"";case 1:return a?"0?":"0";case 2:return a?"0{0,2}":"00";default:return a?`0{0,${n}}`:`0{${n}}`}}z.cache={},z.clearCache=()=>z.cache={};var ke=z;const Be=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),bt=e=>r=>e===!0?Number(r):String(r),ye=e=>typeof e=="number"||typeof e=="string"&&e!=="",re=e=>Number.isInteger(+e),_e=e=>{let r=`${e}`,t=-1;if(r[0]==="-"&&(r=r.slice(1)),r==="0")return!1;for(;r[++t]==="0";);return t>0},xt=(e,r,t)=>typeof e=="string"||typeof r=="string"?!0:t.stringify===!0,Ht=(e,r,t)=>{if(r>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?r-1:r,"0")}return t===!1?String(e):e},Pe=(e,r)=>{let t=e[0]==="-"?"-":"";for(t&&(e=e.slice(1),r--);e.length<r;)e="0"+e;return t?"-"+e:e},Tt=(e,r)=>{e.negatives.sort((s,l)=>s<l?-1:s>l?1:0),e.positives.sort((s,l)=>s<l?-1:s>l?1:0);let t=r.capture?"":"?:",n="",a="",i;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(a=`-(${t}${e.negatives.join("|")})`),n&&a?i=`${n}|${a}`:i=n||a,r.wrap?`(${t}${i})`:i},De=(e,r,t,n)=>{if(t)return ke(e,r,Object.assign({wrap:!1},n));let a=String.fromCharCode(e);if(e===r)return a;let i=String.fromCharCode(r);return`[${a}-${i}]`},Ge=(e,r,t)=>{if(Array.isArray(e)){let n=t.wrap===!0,a=t.capture?"":"?:";return n?`(${a}${e.join("|")})`:e.join("|")}return ke(e,r,t)},Ue=(...e)=>new RangeError("Invalid range arguments: "+Re.inspect(...e)),Ke=(e,r,t)=>{if(t.strictRanges===!0)throw Ue([e,r]);return[]},$t=(e,r)=>{if(r.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},Ot=(e,r,t=1,n={})=>{let a=Number(e),i=Number(r);if(!Number.isInteger(a)||!Number.isInteger(i)){if(n.strictRanges===!0)throw Ue([e,r]);return[]}a===0&&(a=0),i===0&&(i=0);let s=a>i,l=String(e),A=String(r),h=String(t);t=Math.max(Math.abs(t),1);let g=_e(l)||_e(A)||_e(h),y=g?Math.max(l.length,A.length,h.length):0,c=g===!1&&xt(e,r,n)===!1,S=n.transform||bt(c);if(n.toRegex&&t===1)return De(Pe(e,y),Pe(r,y),!0,n);let _={negatives:[],positives:[]},p=v=>_[v<0?"negatives":"positives"].push(Math.abs(v)),E=[],C=0;for(;s?a>=i:a<=i;)n.toRegex===!0&&t>1?p(a):E.push(Ht(S(a,C),y,c)),a=s?a-t:a+t,C++;return n.toRegex===!0?t>1?Tt(_,n):Ge(E,null,Object.assign({wrap:!1},n)):E},Lt=(e,r,t=1,n={})=>{if(!re(e)&&e.length>1||!re(r)&&r.length>1)return Ke(e,r,n);let a=n.transform||(c=>String.fromCharCode(c)),i=`${e}`.charCodeAt(0),s=`${r}`.charCodeAt(0),l=i>s,A=Math.min(i,s),h=Math.max(i,s);if(n.toRegex&&t===1)return De(A,h,!1,n);let g=[],y=0;for(;l?i>=s:i<=s;)g.push(a(i,y)),i=l?i-t:i+t,y++;return n.toRegex===!0?Ge(g,null,{wrap:!1,options:n}):g},pe=(e,r,t,n={})=>{if(r==null&&ye(e))return[e];if(!ye(e)||!ye(r))return Ke(e,r,n);if(typeof t=="function")return pe(e,r,1,{transform:t});if(Be(t))return pe(e,r,0,t);let a=Object.assign({},n);return a.capture===!0&&(a.wrap=!0),t=t||a.step||1,re(t)?re(e)&&re(r)?Ot(e,r,t,a):Lt(e,r,Math.max(Math.abs(t),1),a):t!=null&&!Be(t)?$t(t,a):pe(e,r,1,t)};var Fe=pe;const wt=(e,r={})=>{let t=(n,a={})=>{let i=w.isInvalidBrace(a),s=n.invalid===!0&&r.escapeInvalid===!0,l=i===!0||s===!0,A=r.escapeInvalid===!0?"\\":"",h="";if(n.isOpen===!0||n.isClose===!0)return A+n.value;if(n.type==="open")return l?A+n.value:"(";if(n.type==="close")return l?A+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":l?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let g=w.reduce(n.nodes),y=Fe(...g,Object.assign({},r,{wrap:!1,toRegex:!0}));if(y.length!==0)return g.length>1&&y.length>1?`(${y})`:y}if(n.nodes)for(let g of n.nodes)h+=t(g,n);return h};return t(e)};var Nt=wt;const q=(e="",r="",t=!1)=>{let n=[];if(e=[].concat(e),r=[].concat(r),!r.length)return e;if(!e.length)return t?w.flatten(r).map(a=>`{${a}}`):r;for(let a of e)if(Array.isArray(a))for(let i of a)n.push(q(i,r,t));else for(let i of r)t===!0&&typeof i=="string"&&(i=`{${i}}`),n.push(Array.isArray(i)?q(a,i,t):a+i);return w.flatten(n)},It=(e,r={})=>{let t=r.rangeLimit===void 0?1e3:r.rangeLimit,n=(a,i={})=>{a.queue=[];let s=i,l=i.queue;for(;s.type!=="brace"&&s.type!=="root"&&s.parent;)s=s.parent,l=s.queue;if(a.invalid||a.dollar){l.push(q(l.pop(),te(a,r)));return}if(a.type==="brace"&&a.invalid!==!0&&a.nodes.length===2){l.push(q(l.pop(),["{}"]));return}if(a.nodes&&a.ranges>0){let y=w.reduce(a.nodes);if(w.exceedsLimit(...y,r.step,t))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=Fe(...y,r);c.length===0&&(c=te(a,r)),l.push(q(l.pop(),c)),a.nodes=[];return}let A=w.encloseBrace(a),h=a.queue,g=a;for(;g.type!=="brace"&&g.type!=="root"&&g.parent;)g=g.parent,h=g.queue;for(let y=0;y<a.nodes.length;y++){let c=a.nodes[y];if(c.type==="comma"&&a.type==="brace"){y===1&&h.push(""),h.push("");continue}if(c.type==="close"){l.push(q(l.pop(),h,A));continue}if(c.value&&c.type!=="open"){h.push(q(h.pop(),c.value));continue}c.nodes&&n(c,a)}return h};return w.flatten(n(e))};var Mt=It,kt={MAX_LENGTH:1024*64,CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_COMMA:",",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_NO_BREAK_SPACE:"\xA0",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SINGLE_QUOTE:"'",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const{MAX_LENGTH:je,CHAR_BACKSLASH:Ee,CHAR_BACKTICK:Bt,CHAR_COMMA:Pt,CHAR_DOT:Dt,CHAR_LEFT_PARENTHESES:Gt,CHAR_RIGHT_PARENTHESES:Ut,CHAR_LEFT_CURLY_BRACE:Kt,CHAR_RIGHT_CURLY_BRACE:Ft,CHAR_LEFT_SQUARE_BRACKET:Qe,CHAR_RIGHT_SQUARE_BRACKET:We,CHAR_DOUBLE_QUOTE:jt,CHAR_SINGLE_QUOTE:Qt,CHAR_NO_BREAK_SPACE:Wt,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Xt}=kt,zt=(e,r={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let t=r||{},n=typeof t.maxLength=="number"?Math.min(je,t.maxLength):je;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let a={type:"root",input:e,nodes:[]},i=[a],s=a,l=a,A=0,h=e.length,g=0,y=0,c;const S=()=>e[g++],_=p=>{if(p.type==="text"&&l.type==="dot"&&(l.type="text"),l&&l.type==="text"&&p.type==="text"){l.value+=p.value;return}return s.nodes.push(p),p.parent=s,p.prev=l,l=p,p};for(_({type:"bos"});g<h;)if(s=i[i.length-1],c=S(),!(c===Xt||c===Wt)){if(c===Ee){_({type:"text",value:(r.keepEscaping?c:"")+S()});continue}if(c===We){_({type:"text",value:"\\"+c});continue}if(c===Qe){A++;let p;for(;g<h&&(p=S());){if(c+=p,p===Qe){A++;continue}if(p===Ee){c+=S();continue}if(p===We&&(A--,A===0))break}_({type:"text",value:c});continue}if(c===Gt){s=_({type:"paren",nodes:[]}),i.push(s),_({type:"text",value:c});continue}if(c===Ut){if(s.type!=="paren"){_({type:"text",value:c});continue}s=i.pop(),_({type:"text",value:c}),s=i[i.length-1];continue}if(c===jt||c===Qt||c===Bt){let p=c,E;for(r.keepQuotes!==!0&&(c="");g<h&&(E=S());){if(E===Ee){c+=E+S();continue}if(E===p){r.keepQuotes===!0&&(c+=E);break}c+=E}_({type:"text",value:c});continue}if(c===Kt){y++;let E={type:"brace",open:!0,close:!1,dollar:l.value&&l.value.slice(-1)==="$"||s.dollar===!0,depth:y,commas:0,ranges:0,nodes:[]};s=_(E),i.push(s),_({type:"open",value:c});continue}if(c===Ft){if(s.type!=="brace"){_({type:"text",value:c});continue}let p="close";s=i.pop(),s.close=!0,_({type:p,value:c}),y--,s=i[i.length-1];continue}if(c===Pt&&y>0){if(s.ranges>0){s.ranges=0;let p=s.nodes.shift();s.nodes=[p,{type:"text",value:te(s)}]}_({type:"comma",value:c}),s.commas++;continue}if(c===Dt&&y>0&&s.commas===0){let p=s.nodes;if(y===0||p.length===0){_({type:"text",value:c});continue}if(l.type==="dot"){if(s.range=[],l.value+=c,l.type="range",s.nodes.length!==3&&s.nodes.length!==5){s.invalid=!0,s.ranges=0,l.type="text";continue}s.ranges++,s.args=[];continue}if(l.type==="range"){p.pop();let E=p[p.length-1];E.value+=l.value+c,l=E,s.ranges--;continue}_({type:"dot",value:c});continue}_({type:"text",value:c})}do if(s=i.pop(),s.type!=="root"){s.nodes.forEach(C=>{C.nodes||(C.type==="open"&&(C.isOpen=!0),C.type==="close"&&(C.isClose=!0),C.nodes||(C.type="text"),C.invalid=!0)});let p=i[i.length-1],E=p.nodes.indexOf(s);p.nodes.splice(E,1,...s.nodes)}while(i.length>0);return _({type:"eos"}),a};var qt=zt;const k=(e,r={})=>{let t=[];if(Array.isArray(e))for(let n of e){let a=k.create(n,r);Array.isArray(a)?t.push(...a):t.push(a)}else t=[].concat(k.create(e,r));return r&&r.expand===!0&&r.nodupes===!0&&(t=[...new Set(t)]),t};k.parse=(e,r={})=>qt(e,r),k.stringify=(e,r={})=>te(typeof e=="string"?k.parse(e,r):e,r),k.compile=(e,r={})=>(typeof e=="string"&&(e=k.parse(e,r)),Nt(e,r)),k.expand=(e,r={})=>{typeof e=="string"&&(e=k.parse(e,r));let t=Mt(e,r);return r.noempty===!0&&(t=t.filter(Boolean)),r.nodupes===!0&&(t=[...new Set(t)]),t},k.create=(e,r={})=>e===""||e.length<3?[e]:r.expand!==!0?k.compile(e,r):k.expand(e,r);var Xe=k;const G="\\\\/",ze=`[^${G}]`,F="\\.",Zt="\\+",Yt="\\?",he="\\/",Vt="(?=.)",qe="[^/]",me=`(?:${he}|$)`,Ze=`(?:^|${he})`,Se=`${F}{1,2}${me}`,Jt=`(?!${F})`,er=`(?!${Ze}${Se})`,tr=`(?!${F}{0,1}${me})`,rr=`(?!${Se})`,nr=`[^.${he}]`,sr=`${qe}*?`,Ye={DOT_LITERAL:F,PLUS_LITERAL:Zt,QMARK_LITERAL:Yt,SLASH_LITERAL:he,ONE_CHAR:Vt,QMARK:qe,END_ANCHOR:me,DOTS_SLASH:Se,NO_DOT:Jt,NO_DOTS:er,NO_DOT_SLASH:tr,NO_DOTS_SLASH:rr,QMARK_NO_DOT:nr,STAR:sr,START_ANCHOR:Ze},ar=Object.assign({},Ye,{SLASH_LITERAL:`[${G}]`,QMARK:ze,STAR:`${ze}*?`,DOTS_SLASH:`${F}{1,2}(?:[${G}]|$)`,NO_DOT:`(?!${F})`,NO_DOTS:`(?!(?:^|[${G}])${F}{1,2}(?:[${G}]|$))`,NO_DOT_SLASH:`(?!${F}{0,1}(?:[${G}]|$))`,NO_DOTS_SLASH:`(?!${F}{1,2}(?:[${G}]|$))`,QMARK_NO_DOT:`[^.${G}]`,START_ANCHOR:`(?:^|[${G}])`,END_ANCHOR:`(?:[${G}]|$)`}),ir={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var Z={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ir,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHAR:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Ae.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?ar:Ye}},T=Te(function(e,r){const t=process.platform==="win32",{REGEX_SPECIAL_CHARS:n,REGEX_SPECIAL_CHARS_GLOBAL:a,REGEX_REMOVE_BACKSLASH:i}=Z;r.isObject=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r.hasRegexChars=s=>n.test(s),r.isRegexChar=s=>s.length===1&&r.hasRegexChars(s),r.escapeRegex=s=>s.replace(a,"\\$1"),r.toPosixSlashes=s=>s.replace(/\\/g,"/"),r.removeBackslashes=s=>s.replace(i,l=>l==="\\"?"":l),r.supportsLookbehinds=()=>{let s=process.version.slice(1).split(".");return s.length===3&&+s[0]>=9||+s[0]==8&&+s[1]>=10},r.isWindows=s=>s&&typeof s.windows=="boolean"?s.windows:t===!0||Ae.sep==="\\",r.escapeLast=(s,l,A)=>{let h=s.lastIndexOf(l,A);return h===-1?s:s[h-1]==="\\"?r.escapeLast(s,l,h-1):s.slice(0,h)+"\\"+s.slice(h)}});T.isObject,T.hasRegexChars,T.isRegexChar,T.escapeRegex,T.toPosixSlashes,T.removeBackslashes,T.supportsLookbehinds,T.isWindows,T.escapeLast;const{CHAR_ASTERISK:Ve,CHAR_AT:lr,CHAR_BACKWARD_SLASH:ne,CHAR_COMMA:ur,CHAR_DOT:Ce,CHAR_EXCLAMATION_MARK:Je,CHAR_FORWARD_SLASH:et,CHAR_LEFT_CURLY_BRACE:ve,CHAR_LEFT_PARENTHESES:tt,CHAR_LEFT_SQUARE_BRACKET:or,CHAR_PLUS:cr,CHAR_QUESTION_MARK:fr,CHAR_RIGHT_CURLY_BRACE:pr,CHAR_RIGHT_PARENTHESES:hr,CHAR_RIGHT_SQUARE_BRACKET:gr}=Z,Ar=e=>e===et||e===ne;var Rr=(e,r)=>{let t=r||{},n=e.length-1,a=-1,i=0,s=0,l=!1,A=!1,h=!1,g=0,y,c,S=!1,_=()=>a>=n,p=()=>(y=c,e.charCodeAt(++a));for(;a<n;){c=p();let x;if(c===ne){A=!0,x=p(),x===ve&&(S=!0);continue}if(S===!0||c===ve)for(g++;!_()&&(x=p());){if(x===ne){A=!0,x=p();continue}if(x===ve){g++;continue}if(!S&&x===Ce&&(x=p())===Ce){l=!0;break}if(!S&&x===ur){l=!0;break}if(x===pr&&(g--,g===0)){S=!1;break}}if(c===et){if(y===Ce&&a===i+1){i+=2;continue}s=a+1;continue}if(c===Ve){l=!0;break}if(c===Ve||c===fr){l=!0;break}if(c===or)for(;!_()&&(x=p());){if(x===ne){A=!0,x=p();continue}if(x===gr){l=!0;break}}if((c===cr||c===lr||c===Je)&&e.charCodeAt(a+1)===tt){l=!0;break}if(c===Je&&a===i){h=!0,i++;continue}if(c===tt)for(;!_()&&(x=p());){if(x===ne){A=!0,x=p();continue}if(x===hr){l=!0;break}}if(l)break}let E="",C=e,v=e,H="";return i>0&&(E=e.slice(0,i),e=e.slice(i),s-=i),v&&l===!0&&s>0?(v=e.slice(0,s),H=e.slice(s)):l===!0?(v="",H=e):v=e,v&&v!==""&&v!=="/"&&v!==e&&Ar(v.charCodeAt(v.length-1))&&(v=v.slice(0,-1)),t.unescape===!0&&(H&&(H=T.removeBackslashes(H)),v&&A===!0&&(v=T.removeBackslashes(v))),{prefix:E,input:C,base:v,glob:H,negated:h,isGlob:l}};const{MAX_LENGTH:ge,POSIX_REGEX_SOURCE:dr,REGEX_NON_SPECIAL_CHAR:yr,REGEX_SPECIAL_CHARS_BACKREF:_r,REPLACEMENTS:rt}=Z,Er=(e,r)=>typeof r.expandRange=="function"?r.expandRange(...e,r):(e.sort(),`[${e.join("-")}]`),mr=e=>{let r=1;for(;e.peek()==="!"&&(e.peek(2)!=="("||e.peek(3)==="?");)e.advance(),e.start++,r++;return r%2===0?!1:(e.negated=!0,e.start++,!0)},J=(e,r)=>`Missing ${e}: "${r}" - use "\\\\${r}" to match literal characters`,nt=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=rt[e]||e;let t=Object.assign({},r),n=typeof t.maxLength=="number"?Math.min(ge,t.maxLength):ge,a=e.length;if(a>n)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${n}`);let i={type:"bos",value:"",output:t.prepend||""},s=[i],l=t.capture?"":"?:",A=T.isWindows(r);const h=Z.globChars(A),g=Z.extglobChars(h),{DOT_LITERAL:y,PLUS_LITERAL:c,SLASH_LITERAL:S,ONE_CHAR:_,DOTS_SLASH:p,NO_DOT:E,NO_DOT_SLASH:C,NO_DOTS_SLASH:v,QMARK:H,QMARK_NO_DOT:x,STAR:I,START_ANCHOR:j}=h,M=d=>`(${l}(?:(?!${j}${d.dot?p:y}).)*?)`;let Y=t.dot?"":E,K=t.bash===!0?M(t):I,ft=t.dot?H:x;t.capture&&(K=`(${K})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let f={index:-1,start:0,consumed:"",output:"",backtrack:!1,brackets:0,braces:0,parens:0,quotes:0,tokens:s},B=[],ie=[],o=i,u;const V=()=>f.index===a-1,O=f.peek=(d=1)=>e[f.index+d],Q=f.advance=()=>e[++f.index],le=d=>{f.output+=d.output!=null?d.output:d.value,f.consumed+=d.value||""},ue=d=>{f[d]++,ie.push(d)},W=d=>{f[d]--,ie.pop()},b=d=>{if(o.type==="globstar"){let R=f.braces>0&&(d.type==="comma"||d.type==="brace"),m=B.length&&(d.type==="pipe"||d.type==="paren");d.type!=="slash"&&d.type!=="paren"&&!R&&!m&&(f.output=f.output.slice(0,-o.output.length),o.type="star",o.value="*",o.output=K,f.output+=o.output)}if(B.length&&d.type!=="paren"&&!g[d.value]&&(B[B.length-1].inner+=d.value),(d.value||d.output)&&le(d),o&&o.type==="text"&&d.type==="text"){o.value+=d.value;return}d.prev=o,s.push(d),o=d},oe=(d,R)=>{let m=Object.assign({},g[R],{conditions:1,inner:""});m.prev=o,m.parens=f.parens,m.output=f.output;let L=(t.capture?"(":"")+m.open;b({type:d,value:R,output:f.output?"":_}),b({type:"paren",extglob:!0,value:Q(),output:L}),ue("parens"),B.push(m)},pt=d=>{let R=d.close+(t.capture?")":"");if(d.type==="negate"){let m=K;d.inner&&d.inner.length>1&&d.inner.includes("/")&&(m=M(t)),(m!==K||V()||/^\)+$/.test(e.slice(f.index+1)))&&(R=d.close=")$))"+m),d.prev.type==="bos"&&V()&&(f.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:u,output:R}),W("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/{[()\]}"])/.test(e)){let d=!1,R=e.replace(_r,(m,L,P,D,X,ce)=>D==="\\"?(d=!0,m):D==="?"?L?L+D+(X?H.repeat(X.length):""):ce===0?ft+(X?H.repeat(X.length):""):H.repeat(P.length):D==="."?y.repeat(P.length):D==="*"?L?L+D+(X?K:""):K:L?m:"\\"+m);return d===!0&&(t.unescape===!0?R=R.replace(/\\/g,""):R=R.replace(/\\+/g,m=>m.length%2===0?"\\\\":m?"\\":"")),f.output=R,f}for(;!V();){if(u=Q(),u==="\0")continue;if(u==="\\"){let R=O();if(R==="/"&&t.bash!==!0||R==="."||R===";")continue;if(!R){u+="\\",b({type:"text",value:u});continue}let m=/^\\+/.exec(e.slice(f.index+1)),L=0;if(m&&m[0].length>2&&(L=m[0].length,f.index+=L,L%2!==0&&(u+="\\")),t.unescape===!0?u=Q()||"":u+=Q()||"",f.brackets===0){b({type:"text",value:u});continue}}if(f.brackets>0&&(u!=="]"||o.value==="["||o.value==="[^")){if(t.posix!==!1&&u===":"){let R=o.value.slice(1);if(R.includes("[")&&(o.posix=!0,R.includes(":"))){let m=o.value.lastIndexOf("["),L=o.value.slice(0,m),P=o.value.slice(m+2),D=dr[P];if(D){o.value=L+D,f.backtrack=!0,Q(),!i.output&&s.indexOf(o)===1&&(i.output=_);continue}}}(u==="["&&O()!==":"||u==="-"&&O()==="]")&&(u="\\"+u),u==="]"&&(o.value==="["||o.value==="[^")&&(u="\\"+u),t.posix===!0&&u==="!"&&o.value==="["&&(u="^"),o.value+=u,le({value:u});continue}if(f.quotes===1&&u!=='"'){u=T.escapeRegex(u),o.value+=u,le({value:u});continue}if(u==='"'){f.quotes=f.quotes===1?0:1,t.keepQuotes===!0&&b({type:"text",value:u});continue}if(u==="("){b({type:"paren",value:u}),ue("parens");continue}if(u===")"){if(f.parens===0&&t.strictBrackets===!0)throw new SyntaxError(J("opening","("));let R=B[B.length-1];if(R&&f.parens===R.parens+1){pt(B.pop());continue}b({type:"paren",value:u,output:f.parens?")":"\\)"}),W("parens");continue}if(u==="["){if(t.nobracket===!0||!e.slice(f.index+1).includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(J("closing","]"));u="\\"+u}else ue("brackets");b({type:"bracket",value:u});continue}if(u==="]"){if(t.nobracket===!0||o&&o.type==="bracket"&&o.value.length===1){b({type:"text",value:u,output:"\\"+u});continue}if(f.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(J("opening","["));b({type:"text",value:u,output:"\\"+u});continue}W("brackets");let R=o.value.slice(1);if(o.posix!==!0&&R[0]==="^"&&!R.includes("/")&&(u="/"+u),o.value+=u,le({value:u}),t.literalBrackets===!1||T.hasRegexChars(R))continue;let m=T.escapeRegex(o.value);if(f.output=f.output.slice(0,-o.value.length),t.literalBrackets===!0){f.output+=m,o.value=m;continue}o.value=`(${l}${m}|${o.value})`,f.output+=o.value;continue}if(u==="{"&&t.nobrace!==!0){b({type:"brace",value:u,output:"("}),ue("braces");continue}if(u==="}"){if(t.nobrace===!0||f.braces===0){b({type:"text",value:u,output:"\\"+u});continue}let R=")";if(f.dots===!0){let m=s.slice(),L=[];for(let P=m.length-1;P>=0&&(s.pop(),m[P].type!=="brace");P--)m[P].type!=="dots"&&L.unshift(m[P].value);R=Er(L,t),f.backtrack=!0}b({type:"brace",value:u,output:R}),W("braces");continue}if(u==="|"){B.length>0&&B[B.length-1].conditions++,b({type:"text",value:u});continue}if(u===","){let R=u;f.braces>0&&ie[ie.length-1]==="braces"&&(R="|"),b({type:"comma",value:u,output:R});continue}if(u==="/"){if(o.type==="dot"&&f.index===1){f.start=f.index+1,f.consumed="",f.output="",s.pop(),o=i;continue}b({type:"slash",value:u,output:S});continue}if(u==="."){if(f.braces>0&&o.type==="dot"){o.value==="."&&(o.output=y),o.type="dots",o.output+=u,o.value+=u,f.dots=!0;continue}b({type:"dot",value:u,output:y});continue}if(u==="?"){if(o&&o.type==="paren"){let R=O(),m=u;if(R==="<"&&!T.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(o.value==="("&&!/[!=<:]/.test(R)||R==="<"&&!/[!=]/.test(O(2)))&&(m="\\"+u),b({type:"text",value:u,output:m});continue}if(t.noextglob!==!0&&O()==="("&&O(2)!=="?"){oe("qmark",u);continue}if(t.dot!==!0&&(o.type==="slash"||o.type==="bos")){b({type:"qmark",value:u,output:x});continue}b({type:"qmark",value:u,output:H});continue}if(u==="!"){if(t.noextglob!==!0&&O()==="("&&(O(2)!=="?"||!/[!=<:]/.test(O(3)))){oe("negate",u);continue}if(t.nonegate!==!0&&f.index===0){mr(f);continue}}if(u==="+"){if(t.noextglob!==!0&&O()==="("&&O(2)!=="?"){oe("plus",u);continue}if(o&&(o.type==="bracket"||o.type==="paren"||o.type==="brace")){let R=o.extglob===!0?"\\"+u:u;b({type:"plus",value:u,output:R});continue}if(f.parens>0&&t.regex!==!1){b({type:"plus",value:u});continue}b({type:"plus",value:c});continue}if(u==="@"){if(t.noextglob!==!0&&O()==="("&&O(2)!=="?"){b({type:"at",value:u,output:""});continue}b({type:"text",value:u});continue}if(u!=="*"){(u==="$"||u==="^")&&(u="\\"+u);let R=yr.exec(e.slice(f.index+1));R&&(u+=R[0],f.index+=R[0].length),b({type:"text",value:u});continue}if(o&&(o.type==="globstar"||o.star===!0)){o.type="star",o.star=!0,o.value+=u,o.output=K,f.backtrack=!0,f.consumed+=u;continue}if(t.noextglob!==!0&&O()==="("&&O(2)!=="?"){oe("star",u);continue}if(o.type==="star"){if(t.noglobstar===!0){f.consumed+=u;continue}let R=o.prev,m=R.prev,L=R.type==="slash"||R.type==="bos",P=m&&(m.type==="star"||m.type==="globstar");if(t.bash===!0&&(!L||!V()&&O()!=="/")){b({type:"star",value:u,output:""});continue}let D=f.braces>0&&(R.type==="comma"||R.type==="brace"),X=B.length&&(R.type==="pipe"||R.type==="paren");if(!L&&R.type!=="paren"&&!D&&!X){b({type:"star",value:u,output:""});continue}for(;e.slice(f.index+1,f.index+4)==="/**";){let fe=e[f.index+4];if(fe&&fe!=="/")break;f.consumed+="/**",f.index+=3}if(R.type==="bos"&&V()){o.type="globstar",o.value+=u,o.output=M(t),f.output=o.output,f.consumed+=u;continue}if(R.type==="slash"&&R.prev.type!=="bos"&&!P&&V()){f.output=f.output.slice(0,-(R.output+o.output).length),R.output="(?:"+R.output,o.type="globstar",o.output=M(t)+"|$)",o.value+=u,f.output+=R.output+o.output,f.consumed+=u;continue}let ce=O();if(R.type==="slash"&&R.prev.type!=="bos"&&ce==="/"){let fe=O(2)!==void 0?"|$":"";f.output=f.output.slice(0,-(R.output+o.output).length),R.output="(?:"+R.output,o.type="globstar",o.output=`${M(t)}${S}|${S}${fe})`,o.value+=u,f.output+=R.output+o.output,f.consumed+=u+Q(),b({type:"slash",value:u,output:""});continue}if(R.type==="bos"&&ce==="/"){o.type="globstar",o.value+=u,o.output=`(?:^|${S}|${M(t)}${S})`,f.output=o.output,f.consumed+=u+Q(),b({type:"slash",value:u,output:""});continue}f.output=f.output.slice(0,-o.output.length),o.type="globstar",o.output=M(t),o.value+=u,f.output+=o.output,f.consumed+=u;continue}let d={type:"star",value:u,output:K};if(t.bash===!0){d.output=".*?",(o.type==="bos"||o.type==="slash")&&(d.output=Y+d.output),b(d);continue}if(o&&(o.type==="bracket"||o.type==="paren")&&t.regex===!0){d.output=u,b(d);continue}(f.index===f.start||o.type==="slash"||o.type==="dot")&&(o.type==="dot"?(f.output+=C,o.output+=C):t.dot===!0?(f.output+=v,o.output+=v):(f.output+=Y,o.output+=Y),O()!=="*"&&(f.output+=_,o.output+=_)),b(d)}for(;f.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(J("closing","]"));f.output=T.escapeLast(f.output,"["),W("brackets")}for(;f.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(J("closing",")"));f.output=T.escapeLast(f.output,"("),W("parens")}for(;f.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(J("closing","}"));f.output=T.escapeLast(f.output,"{"),W("braces")}if(t.strictSlashes!==!0&&(o.type==="star"||o.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${S}?`}),f.backtrack===!0){f.output="";for(let d of f.tokens)f.output+=d.output!=null?d.output:d.value,d.suffix&&(f.output+=d.suffix)}return f};nt.fastpaths=(e,r)=>{let t=Object.assign({},r),n=typeof t.maxLength=="number"?Math.min(ge,t.maxLength):ge,a=e.length;if(a>n)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${n}`);e=rt[e]||e;let i=T.isWindows(r);const{DOT_LITERAL:s,SLASH_LITERAL:l,ONE_CHAR:A,DOTS_SLASH:h,NO_DOT:g,NO_DOTS:y,NO_DOTS_SLASH:c,STAR:S,START_ANCHOR:_}=Z.globChars(i);let p=t.capture?"":"?:",E=t.bash===!0?".*?":S,C=t.dot?y:g,v=t.dot?c:g;t.capture&&(E=`(${E})`);const H=j=>`(${p}(?:(?!${_}${j.dot?h:s}).)*?)`,x=j=>{switch(j){case"*":return`${C}${A}${E}`;case".*":return`${s}${A}${E}`;case"*.*":return`${C}${E}${s}${A}${E}`;case"*/*":return`${C}${E}${l}${A}${v}${E}`;case"**":return C+H(t);case"**/*":return`(?:${C}${H(t)}${l})?${v}${A}${E}`;case"**/*.*":return`(?:${C}${H(t)}${l})?${v}${E}${s}${A}${E}`;case"**/.*":return`(?:${C}${H(t)}${l})?${s}${A}${E}`;default:{let M=/^(.*?)\.(\w+)$/.exec(j);if(!M)return;let Y=x(M[1]);return Y?Y+s+M[2]:void 0}}};let I=x(e);return I&&t.strictSlashes!==!0&&(I+=`${l}?`),I};var st=nt;const N=(e,r,t=!1)=>{if(Array.isArray(e)){let h=e.map(g=>N(g,r,t));return g=>{for(let y of h){let c=y(g);if(c)return c}return!1}}if(typeof e!="string"||e==="")throw new TypeError("Expected pattern to be a non-empty string");let n=r||{},a=T.isWindows(r),i=N.makeRe(e,r,!1,!0),s=i.state;delete i.state;let l=()=>!1;if(n.ignore){let h=Object.assign({},r,{ignore:null,onMatch:null,onResult:null});l=N(n.ignore,h,t)}const A=(h,g=!1)=>{let{isMatch:y,match:c,output:S}=N.test(h,i,r,{glob:e,posix:a}),_={glob:e,state:s,regex:i,posix:a,input:h,output:S,match:c,isMatch:y};return typeof n.onResult=="function"&&n.onResult(_),y===!1?(_.isMatch=!1,g?_:!1):l(h)?(typeof n.onIgnore=="function"&&n.onIgnore(_),_.isMatch=!1,g?_:!1):(typeof n.onMatch=="function"&&n.onMatch(_),g?_:!0)};return t&&(A.state=s),A};N.test=(e,r,t,{glob:n,posix:a}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let i=t||{},s=i.format||(a?T.toPosixSlashes:null),l=e===n,A=l&&s?s(e):e;return l===!1&&(A=s?s(e):e,l=A===n),(l===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?l=N.matchBase(e,r,t,a):l=r.exec(A)),{isMatch:!!l,match:l,output:A}},N.matchBase=(e,r,t,n=T.isWindows(t))=>(r instanceof RegExp?r:N.makeRe(r,t)).test(Ae.basename(e)),N.isMatch=(e,r,t)=>N(r,t)(e),N.parse=(e,r)=>st(e,r),N.scan=(e,r)=>Rr(e,r),N.makeRe=(e,r,t=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let a=r||{},i=a.contains?"":"^",s=a.contains?"":"$",l={negated:!1,fastpaths:!0},A="",h;if(e.startsWith("./")&&(e=e.slice(2),A=l.prefix="./"),a.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(h=st.fastpaths(e,r)),h===void 0&&(l=N.parse(e,r),l.prefix=A+(l.prefix||""),h=l.output),t===!0)return h;let g=`${i}(?:${h})${s}`;l&&l.negated===!0&&(g=`^(?!${g}).*$`);let y=N.toRegex(g,r);return n===!0&&(y.state=l),y},N.toRegex=(e,r)=>{try{let t=r||{};return new RegExp(e,t.flags||(t.nocase?"i":""))}catch(t){if(r&&r.debug===!0)throw t;return/$^/}},N.constants=Z;var Sr=N,U=Sr;const at=e=>typeof e=="string"&&(e===""||e==="./"),$=(e,r,t)=>{r=[].concat(r),e=[].concat(e);let n=new Set,a=new Set,i=new Set,s=0,l=g=>{i.add(g.output),t&&t.onResult&&t.onResult(g)};for(let g=0;g<r.length;g++){let y=U(String(r[g]),Object.assign({},t,{onResult:l}),!0),c=y.state.negated||y.state.negatedExtglob;c&&s++;for(let S of e){let _=y(S,!0);(c?!_.isMatch:_.isMatch)&&(c?n.add(_.output):(n.delete(_.output),a.add(_.output)))}}let h=(s===r.length?[...i]:[...a]).filter(g=>!n.has(g));if(t&&h.length===0){if(t.failglob===!0)throw new Error(`No matches found for "${r.join(", ")}"`);if(t.nonull===!0||t.nullglob===!0)return t.unescape?r.map(g=>g.replace(/\\/g,"")):r}return h};$.match=$,$.matcher=(e,r)=>U(e,r),$.isMatch=(e,r,t)=>U(r,t)(e),$.any=$.isMatch,$.not=(e,r,t={})=>{r=[].concat(r).map(String);let n=new Set,a=[],s=$(e,r,Object.assign({},t,{onResult:l=>{t.onResult&&t.onResult(l),a.push(l.output)}}));for(let l of a)s.includes(l)||n.add(l);return[...n]},$.contains=(e,r,t)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Re.inspect(e)}"`);if(Array.isArray(r))return r.some(n=>$.contains(e,n,t));if(typeof r=="string"){if(at(e)||at(r))return!1;if(e.includes(r)||e.startsWith("./")&&e.slice(2).includes(r))return!0}return $.isMatch(e,r,Object.assign({},t,{contains:!0}))},$.matchKeys=(e,r,t)=>{if(!T.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=$(Object.keys(e),r,t),a={};for(let i of n)a[i]=e[i];return a},$.some=(e,r,t)=>{let n=[].concat(e);for(let a of[].concat(r)){let i=U(String(a),t);if(n.some(s=>i(s)))return!0}return!1},$.every=(e,r,t)=>{let n=[].concat(e);for(let a of[].concat(r)){let i=U(String(a),t);if(!n.every(s=>i(s)))return!1}return!0},$.all=(e,r,t)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Re.inspect(e)}"`);return[].concat(r).every(n=>U(n,t)(e))},$.capture=(e,r,t)=>{let n=T.isWindows(t),i=U.makeRe(String(e),Object.assign({},t,{capture:!0})).exec(n?T.toPosixSlashes(r):r);if(i)return i.slice(1).map(s=>s===void 0?"":s)},$.makeRe=(...e)=>U.makeRe(...e),$.scan=(...e)=>U.scan(...e),$.parse=(e,r)=>{let t=[];for(let n of[].concat(e||[]))for(let a of Xe(String(n),r))t.push(U.parse(a,r));return t},$.braces=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a string");return r&&r.nobrace===!0||!/\{.*\}/.test(e)?[e]:Xe(e,r)},$.braceExpand=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a string");return $.braces(e,Object.assign({},r,{expand:!0}))};var Cr=$;function it(e){return Array.isArray(e)?e:e==null?[]:[e]}function vr(e,r){return Rt(e)}const br=function(r,t,n){const a=l=>l instanceof RegExp?l:{test:Cr.matcher(vr(l).split(He).join("/"),{dot:!0})},i=it(r).map(a),s=it(t).map(a);return function(l){if(typeof l!="string"||/\0/.test(l))return!1;l=l.split(He).join("/");for(let A=0;A<s.length;++A)if(s[A].test(l))return!1;for(let A=0;A<i.length;++A)if(i[A].test(l))return!0;return!i.length}},xr="break case class catch const continue debugger default delete do else export extends finally for function if import in instanceof let new return super switch this throw try typeof var void while with yield enum await implements package protected static interface private public",Hr="arguments Infinity NaN undefined null true false eval uneval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Symbol Error EvalError InternalError RangeError ReferenceError SyntaxError TypeError URIError Number Math Date String RegExp Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array Map Set WeakMap WeakSet SIMD ArrayBuffer DataView JSON Promise Generator GeneratorFunction Reflect Proxy Intl",Tr=new Set(`${xr} ${Hr}`.split(" "));Tr.add("");const $r=At(new URL(".",import.meta.url)),Or=/\.(jsx|tsx|html|vue|svelte)/,be="vidstack/bundle",Lr="media-",lt="vds-",wr=gt.resolve($r,"./elements.json"),Nr=ht.readFileSync(wr,"utf8"),Ir=JSON.parse(Nr),se={"vds-buffering-indicator":"buffering.css","vds-button":"buttons.css","vds-captions":"captions.css","vds-chapter-title":"chapter-title.css","vds-controls":"controls.css","vds-gesture":"gestures.css","vds-icon":"icons.css","vds-kb-action":"keyboard.css","vds-menu":"menus.css","vds-poster":"poster.css","vds-slider":"sliders.css","vds-thumbnail":"thumbnail.css","vds-time":"time.css","vds-tooltip":"tooltips.css",audio:"layouts/audio.css",video:"layouts/video.css"};for(const e of Object.keys(se))se[e]=`vidstack/player/styles/default/${se[e]}`;const ee=dt((e={})=>{let r=e.include??Or,t=br(r,e.exclude),n={elementsGraph:new Map,stylesGraph:new Map},a=!1,i=!1,s=!1,l=new Map,A=new Map,h=null;function g(){return a||i}function y(p,E){const{elementsGraph:C,stylesGraph:v}=n,{elements:H,styles:x}=Mr(E);return H.size&&(H.has("media-audio-layout")&&(a=!0),H.has("media-video-layout")&&(i=!0),H.has("media-plyr-layout")&&(s=!0),C.set(p,H)),x.size&&v.set(p,x),{elements:H,styles:x}}function c(){if(h){S(be);for(const p of l.keys())S(p)}}function S(p){const E=h?.moduleGraph.getModuleById(p);E&&h?.moduleGraph.invalidateModule(E)}function _(){h?.hot.send({type:"full-reload"})}return[{name:"vidstack-pre",enforce:"pre",resolveId(p){if(p===be)return p;if(l.has(p))return p},load(p){if(p===be)return kr({defaultAudioLayout:a,defaultVideoLayout:i,plyrLayout:s});if(l.has(p)){if(g())return"";const E=l.get(p),C=n.elementsGraph.get(E),v=n.stylesGraph.get(E);return C||v?Br(C,v):""}return null},transformInclude(p){return t(p)},transform(p,E){return y(E,p),null},vite:{configureServer(p){h=p},async handleHotUpdate({file:p,read:E}){if(!t(p))return;const C=n.elementsGraph.get(p),v=n.stylesGraph.get(p),{elements:H,styles:x}=y(p,await E()),I=xe(C,H,"media-audio-layout")||xe(C,H,"media-video-layout")||xe(C,H,"media-plyr-layout");if(n.elementsGraph.set(p,H),n.stylesGraph.set(p,x),I){a=!1,i=!1,s=!1,c(),_();return}if(!(ct(C,H)&&ct(v,x))){const M=A.get(p);M&&(S(M),_())}}}},{name:"vidstack-post",enforce:"post",transformInclude(p){return t(p)},transform(p,E){const{elementsGraph:C,stylesGraph:v}=n,H=C.get(E),x=v.get(E);if(H?.size||x?.size){let I=A.get(E);return I||(I=`:vidstack/chunk-${l.size}`,l.set(I,E),A.set(E,I)),p.startsWith(`import "${I}";`)?p:`import "${I}";
`+p}return null}}]}),ae=0,ut=1,ot=2;function Mr(e){let r=ae,t="",n="",a=new Set,i=new Set;for(let s=0;s<e.length;s++)switch(t=e[s],r){case ae:t==="<"&&e[s+1]!=="/"?(n="",r=ut):t==="v"&&e[s+1]==="d"&&e[s+2]==="s"&&e[s+3]==="-"&&(n="v",r=ot);break;case ut:t===" "||t===">"||t===`
`||t==="\r"?(n.startsWith(Lr)&&a.add(n),n="",r=ae):n+=t;break;case ot:n.startsWith(lt)?(n+=t,n in se&&(i.add(se[n]),n="",r=ae)):t===" "||t===`
`||t==="\r"||n.length>lt.length?r=ae:n+=t;break}return a.delete("media-player"),a.delete("media-provider"),{elements:a,styles:i}}function kr({defaultAudioLayout:e=!1,defaultVideoLayout:r=!1,plyrLayout:t=!1}){const n=[],a=[];return e||r?(n.push('import "vidstack/player/styles/default/theme.css";'),t&&n.push('import "vidstack/player/styles/plyr/theme.css";'),e&&n.push('import "vidstack/player/styles/default/layouts/audio.css";'),r&&n.push('import "vidstack/player/styles/default/layouts/video.css";'),a.push(`import "vidstack/player/layouts${t?"":"/default"}";`),a.push('import "vidstack/player/ui";')):(n.push('import "vidstack/player/styles/base.css";'),t&&(n.push('import "vidstack/player/styles/plyr/theme.css";'),a.push('import "vidstack/player/layouts/plyr";'))),[...n,'import "vidstack/player";',...a].join(`
`)}function Br(e=new Set,r=new Set){const t=[],n=new Set;for(const s of r)t.push(`import "${s}";`);for(const s of e){if(!e.has(s))continue;const l=Ir[s];l?n.add(l):l!=="media-icon"&&console.warn(`[vidstack]: unknown media element was found \`${s}\``)}if(n.size===0)return t.join(`
`);const a=["defineCustomElement",...n];t.push(`import {
${a.join(`,
`)}
} from "vidstack/elements";`);const i=[...n].map(s=>`defineCustomElement(${s});`);return t.join(`
`)+`

`+i.join(`
`)}function xe(e,r,t){return!!e&&!!r&&e.has(t)&&r.has(t)}function ct(e,r){return!e?.size&&!r?.size||!!e&&!!r&&e.size===r.size&&[...e].every(t=>r.has(t))}const Pr=e=>ee.vite(e),Dr=e=>ee.rollup(e),Gr=e=>ee.webpack(e),Ur=e=>ee.rspack(e),Kr=e=>ee.esbuild(e);export{Kr as esbuild,Dr as rollup,Ur as rspack,ee as unplugin,Pr as vite,Gr as webpack};
