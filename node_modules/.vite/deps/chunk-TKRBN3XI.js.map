{
  "version": 3,
  "sources": ["../../vidstack/dev/chunks/vidstack-BoAGnlRt.js"],
  "sourcesContent": ["import { signal, listenEvent, effect, peek, isString } from './vidstack-Bu2kfzUd.js';\nimport { appendParamsToURL } from './vidstack-zG6PIeGg.js';\n\nclass EmbedProvider {\n  #iframe;\n  src = signal(\"\");\n  /**\n   * Defines which referrer is sent when fetching the resource.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement/referrerPolicy}\n   */\n  referrerPolicy = null;\n  get iframe() {\n    return this.#iframe;\n  }\n  constructor(iframe) {\n    this.#iframe = iframe;\n    iframe.setAttribute(\"frameBorder\", \"0\");\n    iframe.setAttribute(\"aria-hidden\", \"true\");\n    iframe.setAttribute(\n      \"allow\",\n      \"autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope\"\n    );\n    if (this.referrerPolicy !== null) {\n      iframe.setAttribute(\"referrerpolicy\", this.referrerPolicy);\n    }\n  }\n  setup() {\n    listenEvent(window, \"message\", this.#onWindowMessage.bind(this));\n    listenEvent(this.#iframe, \"load\", this.onLoad.bind(this));\n    effect(this.#watchSrc.bind(this));\n  }\n  #watchSrc() {\n    const src = this.src();\n    if (!src.length) {\n      this.#iframe.setAttribute(\"src\", \"\");\n      return;\n    }\n    const params = peek(() => this.buildParams());\n    this.#iframe.setAttribute(\"src\", appendParamsToURL(src, params));\n  }\n  postMessage(message, target) {\n    this.#iframe.contentWindow?.postMessage(JSON.stringify(message), target ?? \"*\");\n  }\n  #onWindowMessage(event) {\n    const origin = this.getOrigin(), isOriginMatch = (event.source === null || event.source === this.#iframe?.contentWindow) && (!isString(origin) || origin === event.origin);\n    if (!isOriginMatch) return;\n    try {\n      const message = JSON.parse(event.data);\n      if (message) this.onMessage(message, event);\n      return;\n    } catch (e) {\n    }\n    if (event.data) this.onMessage(event.data, event);\n  }\n}\n\nexport { EmbedProvider };\n"],
  "mappings": ";;;;;;;;;;;;AAGA,IAAM,gBAAN,MAAoB;AAAA,EAClB;AAAA,EACA,MAAM,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMf,iBAAiB;AAAA,EACjB,IAAI,SAAS;AACX,WAAO,KAAK;AAAA,EACd;AAAA,EACA,YAAY,QAAQ;AAClB,SAAK,UAAU;AACf,WAAO,aAAa,eAAe,GAAG;AACtC,WAAO,aAAa,eAAe,MAAM;AACzC,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AACA,QAAI,KAAK,mBAAmB,MAAM;AAChC,aAAO,aAAa,kBAAkB,KAAK,cAAc;AAAA,IAC3D;AAAA,EACF;AAAA,EACA,QAAQ;AACN,gBAAY,QAAQ,WAAW,KAAK,iBAAiB,KAAK,IAAI,CAAC;AAC/D,gBAAY,KAAK,SAAS,QAAQ,KAAK,OAAO,KAAK,IAAI,CAAC;AACxD,WAAO,KAAK,UAAU,KAAK,IAAI,CAAC;AAAA,EAClC;AAAA,EACA,YAAY;AACV,UAAM,MAAM,KAAK,IAAI;AACrB,QAAI,CAAC,IAAI,QAAQ;AACf,WAAK,QAAQ,aAAa,OAAO,EAAE;AACnC;AAAA,IACF;AACA,UAAM,SAAS,KAAK,MAAM,KAAK,YAAY,CAAC;AAC5C,SAAK,QAAQ,aAAa,OAAO,kBAAkB,KAAK,MAAM,CAAC;AAAA,EACjE;AAAA,EACA,YAAY,SAAS,QAAQ;AAC3B,SAAK,QAAQ,eAAe,YAAY,KAAK,UAAU,OAAO,GAAG,UAAU,GAAG;AAAA,EAChF;AAAA,EACA,iBAAiB,OAAO;AACtB,UAAM,SAAS,KAAK,UAAU,GAAG,iBAAiB,MAAM,WAAW,QAAQ,MAAM,WAAW,KAAK,SAAS,mBAAmB,CAAC,SAAS,MAAM,KAAK,WAAW,MAAM;AACnK,QAAI,CAAC,cAAe;AACpB,QAAI;AACF,YAAM,UAAU,KAAK,MAAM,MAAM,IAAI;AACrC,UAAI,QAAS,MAAK,UAAU,SAAS,KAAK;AAC1C;AAAA,IACF,SAAS,GAAG;AAAA,IACZ;AACA,QAAI,MAAM,KAAM,MAAK,UAAU,MAAM,MAAM,KAAK;AAAA,EAClD;AACF;",
  "names": []
}
